<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Pok√©World</title>
</head>
<body>
    <!-- Affichage des messages flash -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <ul>
                {% for category, message in messages %}
                    <li class="{{ category }}">{{ message }}</li>
                {% endfor %}
            </ul>
        {% endif %}
    {% endwith %}
    
    <h1>Pok√©World</h1>

    <!-- Recherche d'un Pok√©mon -->
    <h2>Rechercher un Pok√©mon</h2>
    <form method="POST">
        <input type="text" name="pokemon_name" placeholder="Nom ou ID du Pok√©mon" required>
        <button type="submit">Chercher</button>
    </form>

    {% if pokemon %}
        <h3>{{ pokemon.name }}</h3>
        <img src="{{ pokemon.sprite }}" alt="Image de {{ pokemon.name }}">
        <p>üíñ PV : {{ pokemon.hp }}</p>
        <p>‚öîÔ∏è Attaque : {{ pokemon.attack }}</p>
        <p>üõ°Ô∏è D√©fense : {{ pokemon.defense }}</p>
        <p>üî• Types : {{ ", ".join(pokemon.types) }}</p>
    {% endif %}

    <!-- Comparaison entre deux Pok√©mon -->
    <h2>Comparer deux Pok√©mon</h2>
    <form method="POST">
        <input type="text" name="pokemon1" placeholder="Nom du Pok√©mon 1" required>
        <input type="text" name="pokemon2" placeholder="Nom du Pok√©mon 2" required>
        <button type="submit">Comparer</button>
    </form>

    {% if comparison %}
        <h3>Comparaison</h3>
        <p><strong>{{ comparison.pokemon1.name }}</strong> vs <strong>{{ comparison.pokemon2.name }}</strong></p>
        <p>{{ "üèÜ" if comparison.stronger else "‚ùå" }} Le plus fort en attaque : {{ comparison.pokemon1.name if comparison.stronger else comparison.pokemon2.name }}</p>
    {% endif %}

    <!-- Recherche par type -->
    <h2>Statistiques des Pok√©mon d'un type</h2>
    <form method="POST">
        <input type="text" name="pokemon_type" placeholder="Type (fire, water, grass...)" required>
        <button type="submit">Rechercher</button>
    </form>

    {% if type_info %}
        <h3>Type: {{ request.form['pokemon_type'].capitalize() }}</h3>
        <p>Nombre de Pok√©mon : {{ type_info.count }}</p>
        <p>Moyenne des PV : {{ type_info.avg_hp }}</p>
    {% endif %}
</body>
</html>
